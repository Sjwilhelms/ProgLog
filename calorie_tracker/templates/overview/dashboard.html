{% extends "base.html" %} {% block content %}
<div class="dashboard">

    <div class="dashboard-goals">
        <p>Weight: {{ user_profile.weight }} kg</p>
        <p>Height: {{ user_profile.height }} cm</p>
        <p>Weight Goal: {{ user_profile.weight_goal }} kg</p>
        <p>BMI: {{ user_profile.bmi }}</p>
        <p>Weight to Lose/Gain: {{ user_profile.weight_difference }} kg</p>

        <!-- With conditional checks -->
        {% if user_profile.weight %}
            <p>Current Weight: {{ user_profile.weight }} kg</p>
        {% else %}
            <p><a href="{% url 'calorie_tracker:profile_update' %}">Set your weight</a></p>
        {% endif %}
    </div>

    <div class="dashboard-day">
        <div class="column">
            <h3>Meals</h3>

            {% if food_logs_day %}
            <table>
                <thead>
                    <tr>
                        <th>Meal</th>
                        <th>Type</th>
                        <th>Calories</th>
                    </tr>
                </thead>
                <tbody>
                    {% for food in food_logs_day %}
                    <tr>
                        <td>
                            <a
                                href="{% url 'calorie_tracker:food_detail' food.pk %}"
                                >{{ food.meal_name }}</a
                            >
                        </td>
                        <td>{{ food.meal_type }}</td>
                        <td>{{ food.calories_in }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3">No food logged today</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No food logged today</p>
            {% endif %}
        </div>
        <div class="dashboard-day-burn">
            <h3>Cardio</h3>
            {% if cardio_logs_day %}
            <table>
                <thead>
                    <tr>
                        <th>Activity</th>
                        <th>Duration (mins)</th>
                        <th>Burned</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cardio in cardio_logs_day %}
                    <tr>
                        <td>
                            <a
                                href="{% url 'calorie_tracker:cardio_detail' cardio.pk %}"
                                >{{ cardio.cardio_name }}</a
                            >
                        </td>
                        <td>{{ cardio.duration }}</td>
                        <td>{{ cardio.calories_out }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3">No cardio logged today</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No cardio logged today</p>
            {% endif %}
        </div>

        <div class="dashboard-day-net">
            <h3>Net Calories Today</h3>

            <div>{{ net_calorie_day }}</div>
        </div>
    </div>

    <div class="column">
        <div class="dashboard-rolling">

            <h3>Last 7 Days</h3>

            <div>Net calories {{ net_calorie_rolling_week }}</div>

            {% include "overview/rolling_week_summary.html" with week_type="Last 7 Days (Rolling Week)" days=rolling.rolling_days table_data=rolling.rolling_table_data food_totals=rolling.rolling_food_totals exercise_totals=rolling.rolling_exercise_totals net_calories=rolling.rolling_net_calories %}

        </div>
        <div class="dashboard-calendar">
            <h3>This Week</h3>

            <div>Net calories: {{ net_calorie_calendar_week }}</div>

            {% include "overview/calendar_week_summary.html" with week_type="This Week (Calendar Week)" days=calendar.days table_data=calendar.table_data food_totals=calendar.food_totals exercise_totals=calendar.exercise_totals net_calories=calendar.net_calories %}

        </div>
        <div class="dashboard-year">
        <div class="dashboard-months">
            <h3>Annual Summary</h3>

            <div>Net calories: {{ summary_stats.net_year }}</div>
        
            {% include "overview/yearly_summary.html" with table_data=year.table_data summary_stats=year.summary_stats %}
        </div>
    </div>
    </div>

    
</div>

{% endblock %}
